<!doctype html>
<html>
<head>
    <title>ostinato-xhr demo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>

    <link rel="import" href="../../iron-demo-helpers/demo-pages-shared-styles.html">
    <link rel="import" href="../../iron-demo-helpers/demo-snippet.html">

    <link rel="import" href="../ostinato-xhr.html">

    <style is="custom-style" include="demo-pages-shared-styles">
    </style>

    <script>
        function loadContent() {
            var xhr = document.querySelector('#xhr');
            xhr.generateRequest('view1.html');
        }

        // OUr custom xhr-context
        Polymer({
            is: 'xhr-context',
            behaviors: [XHRContextBehavior]
        });
    </script>
</head>

<body>

    <div class="vertical-section-container centered">
        <h3>Basic ostinato-xhr usage</h3>

        <h4>xhr-link and xhr-link-list</h4>
        <p>Wrap any links that is supposed to load content via
        <code>ostinato-xhr</code> with the <code>xhr-link</code> tag.</p>

        <p>If you have multipe links that should all use the same container, you
        can wrap them in a <code>xhr-link-list</code>.</p>

        <h4>Update History</h4>
        <p>Notice how the browser history (and title) is upddated because
        <code>update-hisory</code> property is set to True.</p>

        <demo-snippet>
            <template>
                <button onclick="loadContent()">Load Content manually (view1.html)</button>

                <hr>

                <xhr-link xhr-selector="#xhr">
                    <a href="view1.html">Load view 1</a>
                </xhr-link>

                <xhr-link-list xhr-selector="#xhr">
                    <a href="view2.html">Load view 2</a>
                    <a href="view3.html">Load view 3</a>
                </xhr-link-list>

                <hr>

                <ostinato-xhr id="xhr"
                              target-selectors="#content"
                              update-history="true"
                              xhr-context-selector="xhr-context">
                </ostinato-xhr>

                <div id="content">
                    <!-- content gets inserted here -->
                </div>
            </template>
        </demo-snippet>
    </div>

    <div class="vertical-section-container centered">
        <h3>Update multiple containers</h3>
        <p>In this example, the document being loaded, <code>multiview.html</code>,
        has a lot of content. But <code>ostinato-xhr</code> will only pull out the content
        that we specify. In this case it's just a header and content</p>

        <demo-snippet>
            <template>
                <xhr-link xhr-selector="#xhrMultiple">
                    <a href="multiview.html">Load content</a>
                </xhr-link>

                <ostinato-xhr id="xhrMultiple"
                              target-selectors="#multiHeader,#multiContent">
                </ostinato-xhr>

                <div id="multiple">
                    <div id="multiHeader">
                        <p>This is a header container</p>
                    </div>

                    <p style="font-weight: bold; color: red;">Some content that should not be updated.</p>

                    <div id="multiContent">
                        <p>This is a content container</p>
                    </div>
                </div>
            </template>
        </demo-snippet>
    </div>

    <div class="vertical-section-container centered">
        <h3>ostinato-xhr-form</h3>
        <demo-snippet>
            <template>
                <div id="formContent">
                    <ostinato-xhr-form target-selectors="#formContent">
                        <form action="https://httpbin.org/post" method="post">
                            <input type="text" name="name">
                            <input type="submit" value="submit name" confirm>
                        </form>
                    </ostinato-xhr-form>
                </div>
            </template>
        </demo-snippet>
    </div>

</body>
</html>
