<!doctype html>
<html>
<head>
    <title>ostinato-xhr demo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>

    <link rel="import" href="../../iron-demo-helpers/demo-pages-shared-styles.html">
    <link rel="import" href="../../iron-demo-helpers/demo-snippet.html">

    <link rel="import" href="../ostinato-xhr.html">

    <style is="custom-style" include="demo-pages-shared-styles">
    </style>

    <script>
        function loadContent() {
            var xhr = document.querySelector('#xhr');
            xhr.generateRequest('view1.html');
        }

        // OUr custom xhr-context
        Polymer({
            is: 'xhr-context',
            behaviors: [XHRContextBehavior]
        });
    </script>
</head>

<body>

    <div class="vertical-section-container centered">
        <h3>Basic ostinato-xhr Demo</h3>
        <demo-snippet>
            <template>
                <xhr-link xhr-selector="#xhr">
                    <a href="view1.html">Load content</a>
                </xhr-link>
                <button onclick="loadContent()">Load Content</button>
                <ostinato-xhr id="xhr"
                              target-selector="#content"
                              update-history="true"
                              xhr-context-selector="xhr-context">
                </ostinato-xhr>
                <div id="content">
                    <!-- content gets inserted here -->
                </div>
            </template>
        </demo-snippet>
    </div>

    <div class="vertical-section-container centered">
        <h3>Use the link-list</h3>
        <p>If you have multipe links that should all use the same container. you
        can wrap them in a <pre>xhr-link-list</pre>.</p>

        <demo-snippet>
            <template>
                <xhr-link-list xhr-selector="#xhrLinkList">
                    <a href="view1.html">Load view 1</a>
                    <a href="view2.html">Load view 2</a>
                    <a href="view3.html">Load view 3</a>
                </xhr-link-list>

                <ostinato-xhr id="xhrLinkList"
                              target-selector="#linkListContent"
                              xhr-context-selector="xhr-context">
                </ostinato-xhr>
                <div id="linkListContent">
                    <!-- content gets inserted here -->
                </div>
            </template>
        </demo-snippet>
    </div>

    <div class="vertical-section-container centered">
        <h3>ostinato-xhr-form</h3>
        <demo-snippet>
            <template>
                <div class="formContent">
                    <ostinato-xhr-form target-selector=".formContent">
                        <form action="https://httpbin.org/post" method="post">
                            <input type="text" name="name">
                            <input type="submit" value="submit name" confirm>
                        </form>
                    </ostinato-xhr-form>
                </div>
            </template>
        </demo-snippet>
    </div>

</body>
</html>
